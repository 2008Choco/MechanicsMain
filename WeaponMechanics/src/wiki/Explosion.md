## Contents
* [Explosion Features]()
* [Examples]()

## Explosion Features
Explosions generated by WeaponMechanics are not like minecraft explosions. This allows us to control
which blocks to destroy, and how to regenerate them. This also allows us to optimize
the explosions to cause less lag.

```yaml
  Explosion:
    Disable_Vanilla_Knockback: <Boolean>
    Explosion_Shape: <Sphere/Cube/Parabola/Default>
    Explosion_Exposure: <Default/Distance/None>
    Explosion_Type_Data:
      Yield: <Double>
      Radius: <Double>
      Angle: <Double>
      Depth: <Double>
      Width: <Double>
      Height: <Double>
      Rays: <Integer>
    Detonation:
      Detonate_After_Ticks: <Ticks> 
      Impact_When:
        Shoot: <Boolean>
        Entity: <Boolean> 
        Block: <Boolean> 
        Liquid: <Boolean> 
    Cluster_Bomb:
      Split_Projectile: <ProjectileSerializer> 
      Projectile_Speed: <Double>
      Number_Of_Bombs: <Integer> 
      Number_Of_Splits: <Integer> 
    Airstrike:
      Dropped_Projectile: <ProjectileSerializer>
      Minimum_Bombs: <Integer> 
      Maximum_Bombs: <Integer>
      Height: <Double> 
      Vertical_Randomness: <Double> 
      Distance_Between_Bombs: <Double> 
      Maximum_Distance_From_Center: <Double>
      Layers: <Integer> 
      Delay_Between_Layers: <Integer>
    Block_Damage:
      Break_Blocks: <Boolean> 
      Spawn_Falling_Block_Chance: <Double>
      Damage_Per_Hit: <Integer>
      Blacklist: <Boolean>
      Block_List:
        - <Material>:<Data>~<Integer>
      Shots_To_Break_Blocks:
        - <Material>:<Data>~<Integer>
    Regeneration:
      Ticks_Before_Start: <Integer> 
      Max_Blocks_Per_Update: <Integer> 
      Ticks_Between_Updates: <Integer>
```

#### `Disable_Vanilla_Knockback`: 
If this is `true`, entities will not be knocked back.

#### `Explosion_Exposure`:
An entity's exposure determines how much damage they take. Let say the maximum damage an explosion can so is `10`.
If the entity has `58%` exposure, then the entity will take `10 * 0.58 = 5.8` damage. Note that explosion exposure
can take a lot of resources to calculate, depending on which exposure type you select here:
* `Default`:
  * Replicates vanilla minecraft explosion behavior.
  * This is the most resource intensive method.
  * Influenced by block obstructions and distance to the explosion.
* `Distance`:
  * An entity's distance to the origin of the explosion decides "how exposed" they are to the explosion.
* `None`:
  * Most lightweight method.
  * Exposure is always `100%`.
  * You should only use this if your server is super laggy due to explosions (Even then, you should not use this!).

#### `Explosion_Shape`:
Determines the shape of the blocks that are blown up. Certain methods take less resources to calculate than others.
* `Sphere`: 
  * Spherical shaped explosion, takes the argument(s): `Radius`.
* `Cube`: 
  * Cubical shaped explosion, takes the argument(s): `Height`, `Width`.
* `Parabola`: 
  * Parabolic shaped explosion, takes the argument(s): `Depth`, `Angle`.
* `Default`: 
  * Replicates the [Vanilla_Explosion], takes the argument(s): `Yield`, `Rays`.

#### `Explosion_Type_Data`:
The arguments taken by the shape of the explosion. Note, only arguments used from the explosion's shape will be used.
For example, `Explosion_Shape: SPHERE` will only use `Radius`.
* `Yield`:
  * This is kind of like the radius of the explosion, but it will always be a bit smaller than the radius.
  * For reference, `tnt = 4`, `creeper = 3`, `charged creeper = 6`.
* `Radius`:
  * The radius is how far from the center of the explosion blocks will be destroyed.
* `Angle`:
  * This one requires basic algebra to understand. Consider the following: `y = mx + b`, 
  point slope formula. `Angle` is the same as `m`, so `Angle` is the slope of the parabola.
  * For reference, `0.5` is a good value for smaller explosions.
* `Depth`:
  * This one requires basic algebra to understand. Consider the following: `y = mx + b`, 
  point slope formula. `Depth` is the same as `b`, so `Depth` is the y-offset of the parabola.
  * Note: This should be a negative value!
* `Width`:
  * How wide the explosion is.
* `Height`:
  * How tall the explosion is.
* `Rays`:
  * How many rays are shot out of each block face.
  * The default value that minecraft uses is 16
    * The vanilla minecraft value **NEVER** changes, regardless of `yield`. You can change it here for lag reasons, or to allow larger explosions to look better
    * If `Yield` is above ~10, then you should increase this number (To make explosions look better)
    * If `Yield` is below ~5, then you should decrease this number (To help cause less lag)
  * Here is a [wiki](https://minecraft.gamepedia.com/Explosion) explaining how this works
  
Alright, I understand that is probably a bit confusing, so I suggest looking at [the examples]()
for some help.

#### `Detonation`:
Determines when the explosion triggers.

* `Delay_After_Impact`: 
  * How long, in ticks, after the explosion triggers that the explosion actually occurs.
* `Impact_When`:
  * `Shoot`: Explosion triggers after shooting.
  * `Entity`: Explosion triggers after colliding with an entity.
  * `Block`: Explosion triggers after colliding with a **solid** block.
  * `Fluid`: Explosion triggers after colliding with a fluid.

#### `Cluster_Bomb`:
Cluster bombs are bombs that, after the initial explosion, split off into smaller bombs that explode.
This effectively allows an explosion to be spread out and randomized. This is compatible with all other
explosion options, including airstrike.

  * `Split_Projectile`:
  * `Projectile_Speed`:
  * `Number_Of_Bombs`:
  * `Number_Of_Splits`:

#### `Airstrike`:
An air-strike is a dropping of explosives from the sky. This is generally used for flare guns. For
some inspiration, an airstrike could be a nuclear missile, a bunker buster, a volley of missiles, a
carpet bombing, or gas bombing (Mojang does not comply with the Geneva conventions).

  * `Dropped_Projectile`: 
    * This is the projectile which is dropped from the air.
    * If you do not use this feature, the projectile defaults to the weapon's projectile.
    * I strongly recommend using this feature.
      * This is because you want a flare to look 1 way, and a missile/bomb to look another
      * You may also want to change how the missile moves compared to the flare
    * How to configure a [Projectile](#todo)
  * `Minimum_Bombs`:
    * The minimum number of bombs that will be dropped.
    * Make sure `Minimum_Bombs <= Maximum_Bombs`.
  * `Maximum_Bombs`:
    * The maximum number of bombs that will be dropped.
    * Make sure `Maximum_Bombs >= Minimum_Bombs`.
  * `Height`:
    * How high above the shot projectile to drop the bombs.
  * `Vertical_Randomness`:
    * The randomness, in blocks, to apply to the dropped bomb's starting y position.
    * This is to make the bombs staggered.
  * `Distance_Between_Bombs`:
    * The minimum amount of horizontal distance between any 2 dropped bombs.
    * Setting this to `0` may give a minor performance increase.
    * Try to make sure there is enough space (Defined as `Maximum_Distance_From_Center`) to
    fit the `Maximum_Bombs`. Otherwise, WeaponMechanics will get confused and will use some
    more cpu power every time it tries to spawn this air-strike.
  * `Maximum_Distance_From_Center`:
    * How far away from the origin of the explosion that can spawn air-strikes.
  * `Layers`:
    * How many times to loop the airstrike (Effectively spawning multiple air-strikes).
    * Defaults to `1`.
  * `Delay_Between_Layers`:
    * This is the delay, in ticks, between each layer defined in `Layers`.

#### `Block_Damage`:
`Block_Damage` allows control over how damage applies to blocks. For example, if you only
want blocks to crack instead of break, or if you want blocks like stone/concrete/bricks etc to take
more damage before breaking.

If you don't want to cause any sort of block damage, simply don't add `Block_Damage` to your weapon.
This will cause block calculations to be completely skipped, saving some resources.

* `Break_Blocks`: 
  * True if you want blocks to break.
* `Spawn_Falling_Block_Chance:`:
  * The chance of spawning a falling block of the block that is broken.
  * Setting this to `0.5` means that roughly half of the broken blocks will be "flung" up
  * Note that these falling blocks are completely fake, and will not "break" your world in any way
* `Damage_Per_Hit`: 
  * How much damage to deal to the block. Defaults to 1.
* `Blacklist`:
  * If true, blocks in `Block_List` cannot be broken (and `Shots_To_Break_Blocks` will be
  used for block durability since they can't be added to the `Block_List`).
  * If false, only blocks in `Block_List` can be broken.
* `Block_List`:
  * List follows format: `<Material>:<Data>~<Integer>`.
  * See [Materials for your version]().
  * Examples:
    * `- DIRT` Destroys dirt with one shot.
    * `- OBSIDIAN~5` Destroys obsidian with 5 shots.
    * `- STAINED_GLASS_PANE~1` Destroys all stained-glass panes with 1 shot (`1.12` and lower).
    * `- STAINED_GLASS_PANE:7~2` Overrides ^, destroys gray stained-glass panes with 2 shots (`1.12` and lower).
    * `- GRAY_STAINED_GLASS_PANE` Destroys gray stained-glass panes with 1 shot (`1.13` and higher).
* `Shots_To_Break_Blocks`:
  * Same thing as `Block_List`, but is only used if `Blacklist: true`.

#### `Regeneration`:
This should be used together with `Block_Damage`. If you don't want blocks to regenerate, simply
don't add this.

Note: Block regeneration isn't perfect. Redstone (especially redstone loops) can cause redstone to break
before/during block regeneration. Hopper reliant systems (Like item sorters) will have minor issues as well.
To my knowledge, everything else works fine and blocks regenerate as you would expect. If this worries you, you
can protect your redstone using world guard flags.

* `Ticks_Before_Start`: 
  * The time, in ticks, before blocks will begin to regenerate.
* `Max_Blocks_Per_Update`: 
  * How many blocks to regenerate at a time.
* `Ticks_Between_Updates`: 
  * The time, in ticks, between block regenerations.

## Examples:
This explosion breaks all blocks in a 4.5 block radius, **except** diamond blocks, 
gold blocks, and iron blocks. Every block will break in 1 shot **except** stone, 
diorite, andesite, and granite. The explosion will detonate right after it hits a block.

Note: Designed in 1.15, will not work in 1.12 and lower.
```yaml
  Explosion:
    Disable_Vanilla_Knockback: true
    Explosion_Exposure: None
    Explosion_Shape: Sphere
    Explosion_Type_Data:
      Radius: 4.5
    Detonation:
      Impact_When:
        Block: true
    Block_Damage:
      Break_Blocks: true
      Blacklist: true
      Block_List:
        - diamond_block
        - gold_block
        - iron_block
      Shots_To_Break_Blocks:
        - stone~2
        - diorite~2
        - andesite~2
        - granite~2
    Regeneration:
      Ticks_Before_Start: 200
      Max_Blocks_Per_Update: 1
      Ticks_Between_Updates: 3
```

8 seconds after shooting a gun, 1 bomb from an airstrike will drop from 100 blocks 
above the projectile. The dropped bomb will look like an iron-bar. Once that bomb hits
the ground, a creeper sized explosion will hurt all living entities (There won't be any
damage to the blocks). That explosion will send out 12 bombs that all explode, each of which
spawn in 12 bombs that explode. This means that 145 explosions will occur total.
```yaml
  Explosion:
    Explosion_Shape: Default
    Explosion_Exposure: Default
    Explosion_Type_Data:
      Yield: 4
    Detonation:
      Detonate_After_Ticks: 160 
      Impact_When:
        Shoot: true 
    Cluster_Bomb: 
      Projectile_Speed: 15.0
      Number_Of_Bombs: 12 
      Number_Of_Splits: 2 
    Airstrike:
      Dropped_Projectile: <ProjectileSerializer>
      Minimum_Bombs: 1 
      Maximum_Bombs: 1
      Height: 100.0 
```

[Vanilla_Explosion]: https://minecraft.gamepedia.com/Explosion